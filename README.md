# CPSC-213---The-Cigarette-Smokers-Problem
The cigarette smokers problem is a classic synchronization problem, posed by Suhas Patil in 1971. It is a simple model of a general resource-management problem
that operating systems deal with in many forms. In this problem there are four actors, each represented by a thread, and three resources required to construct and smoke a cigarette: tobacco, paper, and matches. One of the actors is the agent and the other three are smokers. The agent has an infinite supply of all of the resources. Each smoker has an infinite supply of one resource and nothing else; each smoker possesses a different resource. The three smoker threads loop attempting to smoke, which requires that they obtain one unit of both of the resources they do not possess. The agent loops repeatedly, randomly choosing two ingredients to make available to smokers. Each time the agent does this, one of the three smokers should be able to achieve its health-destroying goal. For example, if the agent chose paper and matches, then the tobacco-possessing smoker can consume these two items, combined with its own supply of tobacco, to smoke. To ensure that it
captures that real problem correctly, the agent has a few additional constraints placed on it. The agent is only allowed to communicate by signalling
the availability of a resource using a condition variable. It is not permitted to disclose resource availability in any other way; i.e., smokers can not ask the agent
what is available. In addition, the agent is not permitted to know anything about the resource needs of smokers; i.e., the agent can not wake up a smoker directly.
Finally, each time the agent makes two resources available, it must wait on a condition variable for a smoker to smoke before it can make any additional resources available. The problem is tricky because when the agent makes two items available, every smoker thread can use one of them, but only one can use both. If you
aren't careful, you might create a solution that results in deadlock. For example, if the agent makes paper and matches available, both the paper and the matches smokers want one of these, but neither will be able to smoke because neither has tobacco. But, if either of them does wake up and consume a resource, that will prevent the
tobacco thread from being able to smoke and thus also prevent the agent from waking up to deliver additional resources. If this happens, the system is deadlocked;
no thread will be able to make further progress.
